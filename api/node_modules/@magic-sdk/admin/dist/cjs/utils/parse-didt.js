"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.parseDIDToken = void 0;
const codec_1 = require("./codec");
const type_guards_1 = require("./type-guards");
const sdk_exceptions_1 = require("../core/sdk-exceptions");
/**
 * Parses a DID Token so that the encoded `claim` is in object form.
 */
function parseDIDToken(didToken) {
    try {
        const [proof, claim] = JSON.parse((0, codec_1.decodeValue)(didToken));
        const parsedClaim = JSON.parse(claim);
        if ((0, type_guards_1.isDIDTClaim)(parsedClaim))
            return { raw: [proof, claim], withParsedClaim: [proof, parsedClaim] };
        throw new Error();
    }
    catch (_a) {
        throw (0, sdk_exceptions_1.createMalformedTokenError)();
    }
}
exports.parseDIDToken = parseDIDToken;
//# sourceMappingURL=parse-didt.js.map